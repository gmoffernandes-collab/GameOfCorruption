<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Game of Corruption</title>

<style>
body {
  background-color: #0e0e0e;
  color: #f0f0f0;
  font-family: 'Segoe UI', sans-serif;
  text-align: center;
  padding: 40px;
}
h1 {
  color: #f5b400;
  text-shadow: 0 0 10px #f5b40088;
  font-size: 2.8em;
  margin-bottom: 10px;
}
#stats {
  display: flex;
  justify-content: center;
  gap: 40px;
  margin-top: 10px;
  font-size: 1em;
}
.bar-container {
  width: 200px;
  height: 18px;
  background-color: #333;
  border-radius: 5px;
  overflow: hidden;
  margin-top: 5px;
}
.bar {
  height: 100%;
  transition: width 0.4s ease-in-out;
}
#power-bar { background-color: #f5b400; width: 0%; }
#popularity-bar { background-color: #2ecc71; width: 0%; }
#story {
  margin-top: 30px;
  font-size: 1.2em;
  line-height: 1.6em;
  max-width: 700px;
  margin-left: auto;
  margin-right: auto;
}
button {
  background-color: #222;
  color: #f5b400;
  border: 2px solid #f5b400;
  padding: 10px 25px;
  margin: 10px;
  font-size: 1em;
  cursor: pointer;
  border-radius: 6px;
  transition: all 0.2s ease-in-out;
}
button:hover { background-color: #f5b400; color: #111; }
#game-over {
  font-size: 1.3em;
  color: #f5b400;
  margin-top: 20px;
}
</style>

</head>
<body>
<h1>Game of Corruption</h1>

<div id="stats">
  <div>
    ðŸ‘¥ Honest: <span id="score">0</span>
    <div class="bar-container"><div id="power-bar" class="bar"></div></div>
  </div>
  <div>
    ðŸ’° Corrupt: <span id="popularity">0</span>
    <div class="bar-container"><div id="popularity-bar" class="bar"></div></div>
  </div>
</div>

<p id="story">You are elected as the new leader of a nation. Your first big decision awaits.</p>

<div id="choices">
  <button onclick="choose('honest1')">Hold a public press conference to be transparent</button>
  <button onclick="choose('corrupt1')">Make secret deals with business tycoons</button>
</div>

<div id="game-over"></div>

<audio id="click-sound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_eb0a6df7a0.mp3?filename=click-124467.mp3"></audio>
<audio id="end-sound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_cfb4c85df4.mp3?filename=success-1-6297.mp3"></audio>

<script>
let honest = 0;
let corrupt = 0;
let phase = 1;

let history = [];
let earlyCorrupt = false;
let earlyHonest = false;

const clickSound = document.getElementById("click-sound");
const endSound = document.getElementById("end-sound");

function updateBars() {
  const honestPercent = Math.min(honest, 100);
  const corruptPercent = Math.min(corrupt, 100);

  document.getElementById("score").textContent = honestPercent;
  document.getElementById("popularity").textContent = corruptPercent;

  document.getElementById("power-bar").style.width = honestPercent + "%";
  document.getElementById("popularity-bar").style.width = corruptPercent + "%";

  if (history.length === 1) {
    if (honest > corrupt) earlyHonest = true;
    if (corrupt > honest) earlyCorrupt = true;
  }
}

function gameOver(finalText) {
  document.getElementById("choices").innerHTML = "";
  document.getElementById("game-over").innerHTML =
    `<br><strong>${finalText}</strong><br><br><button onclick='location.reload()'>Play Again</button>`;
  endSound.play();
}

function determineFinal() {
  if (honest >= 100) return "FINAL: THE SAINT â€” Pure honesty prevailed.";
  if (corrupt >= 100) return "FINAL: THE TYRANT â€” Absolute corruption rules.";

  if (honest >= 80 && corrupt <= 20) return "FINAL: THE GUARDIAN OF TRUTH â€” Integrity shaped the nation.";
  if (corrupt >= 80 && honest <= 20) return "FINAL: THE MANIPULATOR â€” Society bowed to your will.";

  if (honest >= 70 && corrupt >= 70) return "FINAL: THE DUAL MASK â€” You mastered both faces.";

  if ((honest >= 60 && corrupt >= 60) && Math.abs(honest - corrupt) > 10)
    return "FINAL: THE CHAOS BRINGER â€” Hope and fear coexist under your reign.";

  if (honest >= 40 && honest <= 60 && corrupt >= 40 && corrupt <= 60)
    return "FINAL: THE OPPORTUNIST â€” Adaptation was your greatest weapon.";

  if (Math.abs(honest - corrupt) < 10) return "FINAL: THE NEUTRAL â€” Extremes avoided, balance maintained.";

  if (honest < 40 && corrupt < 40) return "FINAL: THE SURVIVOR â€” You survived without taking sides.";

  if (earlyCorrupt && honest > corrupt) return "FINAL: THE REDEEMED â€” You overcame your darker instincts.";
  if (earlyHonest && corrupt > honest) return "FINAL: THE FALLEN HERO â€” Principles abandoned.";

  const transitions = history.filter((v, i) => i > 0 && history[i] !== history[i - 1]).length;
  if (transitions >= 8) return "FINAL: THE STRATEGIST â€” Every move calculated.";

  return "FINAL: UNDEFINED â€” A unique path was taken.";
}

function choose(option) {
  clickSound.play();
  const story = document.getElementById("story");
  const choices = document.getElementById("choices");

  if (option.includes("honest")) history.push("H");
  if (option.includes("corrupt")) history.push("C");

  /* ---------------- PHASE 1 ---------------- */
  if (phase === 1) {
    if (option === "honest1") {
      honest += 10;
      story.innerHTML = "You openly share your policies with the citizens.";
      choices.innerHTML = `
        <button onclick="choose('honest2')">Investigate government waste</button>
        <button onclick="choose('corrupt2')">Privately pressure rivals</button>`;
    } else {
      corrupt += 10;
      story.innerHTML = "You secretly negotiate lucrative deals with elite businessmen.";
      choices.innerHTML = `
        <button onclick="choose('corrupt3')">Bribe officials quietly</button>
        <button onclick="choose('honest3')">Reveal part of the deals to public</button>`;
    }
    phase++;
    updateBars();
    return;
  }

  /* ---------------- PHASE 2 ---------------- */
  if (phase === 2) {
    if (option === "honest2") {
      honest += 10;
      story.innerHTML = "You uncover embezzlement in the national budget.";
      choices.innerHTML = `
        <button onclick="choose('honest4')">Expose the corrupt ministers</button>
        <button onclick="choose('corrupt4')">Use it to gain political leverage</button>`;
    } else if (option === "corrupt2") {
      corrupt += 10;
      story.innerHTML = "You manipulate rival politicians behind closed doors.";
      choices.innerHTML = `
        <button onclick="choose('corrupt5')">Demand loyalty in return for favors</button>
        <button onclick="choose('honest5')">Publicly justify your actions</button>`;
    } else if (option === "corrupt3") {
      corrupt += 10;
      story.innerHTML = "Officials follow your orders to secure wealth.";
      choices.innerHTML = `
        <button onclick="choose('corrupt6')">Suppress media coverage</button>
        <button onclick="choose('honest6')">Leverage media for partial truth</button>`;
    } else if (option === "honest3") {
      honest += 10;
      story.innerHTML = "Transparency boosts your popularity.";
      choices.innerHTML = `
        <button onclick="choose('honest7')">Implement citizen oversight</button>
        <button onclick="choose('corrupt7')">Exploit newfound trust for personal gain</button>`;
    }
    phase++;
    updateBars();
    return;
  }

  /* ---------------- PHASE 3 ---------------- */
  if (phase === 3) {
    const honestMoves = {
      honest4: "You publicly expose ministers who stole from the public.",
      honest5: "You cleverly use evidence to strengthen anti-corruption laws.",
      honest6: "Partial transparency wins some trust, avoids backlash.",
      honest7: "Citizen oversight improves governance significantly."
    };

    const corruptMoves = {
      corrupt4: "You leverage the corruption scandal to eliminate rivals.",
      corrupt5: "You secretly take bribes to expand influence.",
      corrupt6: "Media is silenced, dissent crushed.",
      corrupt7: "You manipulate citizensâ€™ trust to consolidate power."
    };

    if (honestMoves[option]) {
      honest += 10;
      story.innerHTML = honestMoves[option];
      choices.innerHTML = `
        <button onclick="choose('honest8')">Strengthen democracy institutions</button>
        <button onclick="choose('corrupt8')">Use popularity to dominate politics</button>`;
    } else {
      corrupt += 10;
      story.innerHTML = corruptMoves[option];
      choices.innerHTML = `
        <button onclick="choose('corrupt9')">Sell government assets secretly</button>
        <button onclick="choose('honest9')">Leak minor truths to citizens</button>`;
    }
    phase++;
    updateBars();
    return;
  }

  /* ---------------- PHASE 4 ---------------- */
  if (phase === 4) {
    if (option === "honest8") {
      honest += 10;
      story.innerHTML = "Institutions are reformed to prevent abuse of power.";
      choices.innerHTML = `
        <button onclick="choose('honest10')">Invest in citizen education</button>
        <button onclick="choose('corrupt10')">Influence courts for political gain</button>`;
    }
    else if (option === "corrupt8") {
      corrupt += 10;
      story.innerHTML = "You dominate political parties using charisma and fear.";
      choices.innerHTML = `
        <button onclick="choose('corrupt11')">Control judiciary and media</button>
        <button onclick="choose('honest11')">Reveal some truth to placate public</button>`;
    }
    else if (option === "corrupt9") {
      corrupt += 10;
      story.innerHTML = "Your secret asset sales enrich you and your allies.";
      choices.innerHTML = `
        <button onclick="choose('corrupt12')">Expand personal empire</button>
        <button onclick="choose('honest12')">Return some funds publicly</button>`;
    }
    else if (option === "honest9") {
      honest += 10;
      story.innerHTML = "Partial truth boosts credibility, citizens begin to trust you.";
      choices.innerHTML = `
        <button onclick="choose('honest13')">Establish strong ethics committee</button>
        <button onclick="choose('corrupt13')">Leverage trust for hidden gains</button>`;
    }
    phase++;
    updateBars();
    return;
  }

  /* ---------------- PHASE 5 (FINAL STEPS) ---------------- */
  if (phase === 5) {
    if (option.includes("honest")) honest += 10;
    else corrupt += 10;

    updateBars();

    const ending = determineFinal();
    return gameOver(ending);
  }
}
</script>
</body>
</html>
