<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Game of Corruption</title>

<style>
body {
  background-color: #0e0e0e;
  color: #f0f0f0;
  font-family: 'Segoe UI', sans-serif;
  text-align: center;
  padding: 40px;
}
h1 {
  color: #f5b400;
  text-shadow: 0 0 10px #f5b40088;
  font-size: 2.8em;
  margin-bottom: 10px;
}
#stats {
  display: flex;
  justify-content: center;
  gap: 40px;
  margin-top: 10px;
  font-size: 1em;
}
.bar-container {
  width: 200px;
  height: 18px;
  background-color: #333;
  border-radius: 5px;
  overflow: hidden;
  margin-top: 5px;
}
.bar {
  height: 100%;
  transition: width 0.4s ease-in-out;
}
#power-bar { background-color: #f5b400; width: 0%; }
#popularity-bar { background-color: #2ecc71; width: 0%; }
#story {
  margin-top: 30px;
  font-size: 1.2em;
  line-height: 1.6em;
  max-width: 700px;
  margin-left: auto;
  margin-right: auto;
}
button {
  background-color: #222;
  color: #f5b400;
  border: 2px solid #f5b400;
  padding: 10px 25px;
  margin: 10px;
  font-size: 1em;
  cursor: pointer;
  border-radius: 6px;
  transition: all 0.2s ease-in-out;
}
button:hover { background-color: #f5b400; color: #111; }
#game-over {
  font-size: 1.3em;
  color: #f5b400;
  margin-top: 20px;
}
</style>

</head>
<body>
<h1>Game of Corruption</h1>

<div id="stats">
  <div>
    ðŸ‘¥ Honest: <span id="score">0</span>
    <div class="bar-container"><div id="power-bar" class="bar"></div></div>
  </div>
  <div>
    ðŸ’° Corrupt: <span id="popularity">0</span>
    <div class="bar-container"><div id="popularity-bar" class="bar"></div></div>
  </div>
</div>

<p id="story">A big decision must be made. Will you act with integrity or with power?</p>

<div id="choices">
  <button onclick="choose('honest1')">Act with integrity</button>
  <button onclick="choose('corrupt1')">Use your authority</button>
</div>

<div id="game-over"></div>

<audio id="click-sound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_eb0a6df7a0.mp3?filename=click-124467.mp3"></audio>
<audio id="end-sound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_cfb4c85df4.mp3?filename=success-1-6297.mp3"></audio>

<script>
let honest = 0;
let corrupt = 0;
let phase = 1;

let history = [];
let earlyHonest = false;
let earlyCorrupt = false;

function updateStats() {
  document.getElementById("score").textContent = honest;
  document.getElementById("popularity").textContent = corrupt;
  document.getElementById("power-bar").style.width = honest + "%";
  document.getElementById("popularity-bar").style.width = corrupt + "%";

  if (history.length < 3) {
    if (honest > corrupt) earlyHonest = true;
    if (corrupt > honest) earlyCorrupt = true;
  }
}

function choice(type) {
  if (type === "H") honest += 10;
  if (type === "C") corrupt += 10;
  history.push(type);
  updateStats();
}

function endGame(text) {
  document.getElementById("choices").innerHTML = "";
  document.getElementById("game-over").innerHTML =
    `<br><strong>${text}</strong><br><br><button onclick='location.reload()'>Play Again</button>`;
}

function determineFinal() {

  if (honest >= 100) return "FINAL: THE SAINT â€” Pure integrity defined your rule.";
  if (corrupt >= 100) return "FINAL: THE TYRANT â€” Your corruption consumed the nation.";

  if (honest >= 80 && corrupt <= 20) return "FINAL: THE GUARDIAN OF TRUTH â€” You defended justice.";
  if (corrupt >= 80 && honest <= 20) return "FINAL: THE MANIPULATOR â€” Society bent to your will.";

  if (honest >= 70 && corrupt >= 70) return "FINAL: THE DUAL MASK â€” You lived two lives.";

  if (honest >= 40 && honest <= 60 && corrupt >= 40 && corrupt <= 60)
    return "FINAL: THE OPPORTUNIST â€” You adapted to survive.";

  if (earlyCorrupt && honest > corrupt)
    return "FINAL: THE REDEEMED â€” You walked away from corruption.";

  if (earlyHonest && corrupt > honest)
    return "FINAL: THE FALLEN HERO â€” You betrayed your own values.";

  if (honest < 40 && corrupt < 40)
    return "FINAL: THE SURVIVOR â€” You avoided all extremes.";

  if (Math.abs(honest - corrupt) < 10)
    return "FINAL: THE NEUTRAL â€” Balance guided your actions.";

  return "FINAL: UNKNOWN â€” Your path was unpredictable.";
}

function choose(option) {

  // PHASE 1
  if (phase === 1) {
    if (option === "honest1") {
      choice("H");
      document.getElementById("story").innerHTML = "You choose to act with honesty.";
      document.getElementById("choices").innerHTML = `
        <button onclick="choose('honest2')">Stand firm</button>
        <button onclick="choose('corrupt2')">Make a shady deal</button>`;
    } else {
      choice("C");
      document.getElementById("story").innerHTML = "You use your power to influence the system.";
      document.getElementById("choices").innerHTML = `
        <button onclick="choose('corrupt3')">Pressure journalists</button>
        <button onclick="choose('honest3')">Confess publicly</button>`;
    }
    phase++;
    return;
  }

  // PHASE 2
  if (phase === 2) {
    switch (option) {
      case "honest2": choice("H"); break;
      case "corrupt2": choice("C"); break;
      case "corrupt3": choice("C"); break;
      case "honest3": choice("H"); break;
    }

    document.getElementById("story").innerHTML = "The pressure increases. Your next move matters.";
    document.getElementById("choices").innerHTML = `
      <button onclick="choose('H4')">Expose corruption</button>
      <button onclick="choose('C4')">Hide evidence</button>`;

    phase++;
    return;
  }

  // PHASE 3
  if (phase === 3) {
    option.startsWith("H") ? choice("H") : choice("C");
    document.getElementById("story").innerHTML = "Your actions are changing the nation.";
    document.getElementById("choices").innerHTML = `
      <button onclick="choose('H5')">Protect justice</button>
      <button onclick="choose('C5')">Expand your power</button>`;
    phase++;
    return;
  }

  // PHASE 4 (LAST)
  if (phase === 4) {
    option.startsWith("H") ? choice("H") : choice("C");

    const final = determineFinal();
    endGame(final);
    return;
  }
}
</script>

</body>
</html>
